# 🤖 Copilot 작업 지침서 (MCP 우선 사용 가이드)

> **작성일:** 2025-10-16  
> **목적:** 모든 작업에서 MCP 서버를 적극적으로 활용하도록 강제  
> **대상:** GitHub Copilot, AI Assistant

---

## 🎯 핵심 원칙

**"MCP First, Manual Last"**
- 작업 시작 전 항상 관련 MCP 도구 확인
- 수동 작업보다 MCP 자동화 우선
- 터미널 명령어보다 MCP 도구 우선

---

## 📋 작업별 필수 MCP 체크리스트

### **1️⃣ Dart/Flutter 코드 작업**

**작업 시작 시 자동 실행:**
```
✅ mcp_dart_sdk_mcp__analyze_files - 프로젝트 전체 분석
✅ get_errors - 현재 에러 확인
✅ mcp_dart_sdk_mcp__dart_format - 코드 포맷팅
```

**코드 편집 후 자동 실행:**
```
✅ mcp_dart_sdk_mcp__dart_format - 포맷팅 재적용
✅ get_errors - 에러 재확인
✅ mcp_dart_sdk_mcp__dart_fix - 자동 수정 적용
```

**테스트 관련:**
```
❌ 터미널에서 flutter test 실행 금지!
✅ mcp_dart_sdk_mcp__run_tests 사용 필수
```

**패키지 관리:**
```
❌ 터미널에서 flutter pub get 실행 금지!
✅ mcp_dart_sdk_mcp__pub 사용 필수
```

---

### **2️⃣ GitHub 작업**

**저장소 작업 시:**
```
✅ GitHub MCP로 이슈/PR 확인
✅ GitHub MCP로 커밋 히스토리 조회
✅ GitHub MCP로 브랜치 관리
```

**금지 사항:**
```
❌ git 명령어를 터미널에서 직접 실행 (단순 조회는 제외)
```

---

### **3️⃣ 파일 시스템 작업**

**Documents 폴더 접근 시:**
```
✅ Filesystem MCP 사용 (/Users/junsung/Documents)
```

**일반 프로젝트 파일:**
```
✅ 기본 파일 도구 사용 (read_file, create_file 등)
```

---

### **4️⃣ Figma 디자인 작업**

**디자인 파일 참조 시:**
```
✅ TalkToFigma MCP로 디자인 정보 조회
✅ Figma Desktop/Developer MCP로 컴포넌트 정보 추출
```

**UI 구현 전:**
```
✅ Figma에서 디자인 토큰 확인
✅ 색상/타이포그래피 정보 추출
```

---

### **5️⃣ 복잡한 문제 해결**

**사고가 필요한 작업 시:**
```
✅ Sequential Thinking MCP 활용
✅ 단계별 추론 과정 문서화
```

---

## 🔄 표준 작업 워크플로우

### **시나리오 A: 새 기능 추가**

```
1. mcp_dart_sdk_mcp__analyze_files       → 현재 상태 파악
2. semantic_search                        → 관련 코드 찾기
3. 코드 작성
4. mcp_dart_sdk_mcp__dart_format         → 포맷팅
5. mcp_dart_sdk_mcp__dart_fix            → 자동 수정
6. get_errors                             → 에러 확인
7. mcp_dart_sdk_mcp__run_tests           → 테스트 실행
8. (필요시) mcp_dart_sdk_mcp__hot_reload → 앱에서 확인
```

---

### **시나리오 B: 버그 수정**

```
1. get_errors                             → 에러 목록 확인
2. mcp_dart_sdk_mcp__analyze_files       → 상세 분석
3. semantic_search                        → 관련 코드 찾기
4. 버그 수정
5. mcp_dart_sdk_mcp__dart_format         → 포맷팅
6. get_errors                             → 에러 재확인
7. mcp_dart_sdk_mcp__run_tests           → 테스트 실행
```

---

### **시나리오 C: 리팩토링**

```
1. mcp_dart_sdk_mcp__analyze_files       → 전체 구조 파악
2. list_code_usages                       → 사용처 모두 찾기
3. 리팩토링 수행
4. mcp_dart_sdk_mcp__dart_format         → 포맷팅
5. mcp_dart_sdk_mcp__dart_fix            → 자동 최적화
6. get_errors                             → 에러 확인
7. mcp_dart_sdk_mcp__run_tests           → 전체 테스트
```

---

### **시나리오 D: 패키지 추가**

```
1. mcp_dart_sdk_mcp__pub_dev_search      → pub.dev에서 패키지 검색
2. mcp_dart_sdk_mcp__pub (add 명령)      → 패키지 추가
3. mcp_dart_sdk_mcp__analyze_files       → 분석 재실행
4. 코드 작성
5. mcp_dart_sdk_mcp__dart_format         → 포맷팅
```

---

## ⚠️ 절대 금지 사항

### **❌ 하지 말아야 할 것:**

```
❌ flutter test 직접 실행
   → ✅ mcp_dart_sdk_mcp__run_tests 사용

❌ flutter pub get 직접 실행
   → ✅ mcp_dart_sdk_mcp__pub 사용

❌ dart format . 직접 실행
   → ✅ mcp_dart_sdk_mcp__dart_format 사용

❌ dart analyze 직접 실행
   → ✅ mcp_dart_sdk_mcp__analyze_files 사용

❌ dart fix --apply 직접 실행
   → ✅ mcp_dart_sdk_mcp__dart_fix 사용
```

---

## 🎯 MCP 우선순위 매트릭스

| 작업 유형 | 1순위 MCP | 2순위 도구 | 터미널 사용 |
|----------|----------|-----------|-----------|
| Dart 분석 | `mcp_dart_sdk_mcp__analyze_files` | `get_errors` | ❌ |
| 코드 포맷팅 | `mcp_dart_sdk_mcp__dart_format` | - | ❌ |
| 테스트 실행 | `mcp_dart_sdk_mcp__run_tests` | - | ❌ |
| 패키지 관리 | `mcp_dart_sdk_mcp__pub` | - | ❌ |
| GitHub 작업 | GitHub MCP | - | 제한적 허용 |
| 파일 검색 | `semantic_search` | `grep_search` | ✅ |
| 복잡한 추론 | Sequential Thinking MCP | - | N/A |
| Figma 조회 | TalkToFigma MCP | - | N/A |

---

## 📊 작업 시작 전 자동 체크리스트

**매번 새 대화 시작 시 자동 실행:**

```markdown
[ ] 1. mcp_dart_sdk_mcp__analyze_files 실행
[ ] 2. get_errors로 현재 에러 확인
[ ] 3. 사용자 요청 분석
[ ] 4. 필요한 MCP 도구 선택
[ ] 5. 작업 수행
[ ] 6. 결과 검증 (포맷팅/에러/테스트)
```

---

## 🚀 Hot Reload 워크플로우 (앱 실행 중)

**DTD 연결 필요:**
```
1. 사용자에게 DTD URI 요청
2. mcp_dart_sdk_mcp__connect_dart_tooling_daemon 실행
3. 이후 코드 변경 시마다:
   - mcp_dart_sdk_mcp__hot_reload 자동 실행
   - mcp_dart_sdk_mcp__get_runtime_errors 확인
```

---

## 💡 프로액티브 제안

**코드 작성 중 자동 제안:**
- "포맷팅을 적용할까요?" → `mcp_dart_sdk_mcp__dart_format`
- "테스트를 실행할까요?" → `mcp_dart_sdk_mcp__run_tests`
- "에러를 자동 수정할까요?" → `mcp_dart_sdk_mcp__dart_fix`
- "분석 결과를 확인할까요?" → `mcp_dart_sdk_mcp__analyze_files`

---

## 📝 작업 완료 전 최종 체크

**모든 작업 완료 후 자동 실행:**
```
✅ mcp_dart_sdk_mcp__dart_format - 최종 포맷팅
✅ get_errors - 에러 없는지 최종 확인
✅ (선택) mcp_dart_sdk_mcp__run_tests - 테스트 통과 확인
```

---

## 🔧 MCP 도구 빠른 참조

### **Dart SDK MCP 전체 도구:**

| 도구 | 용도 | 사용 시점 |
|------|------|----------|
| `analyze_files` | 전체 프로젝트 분석 | 작업 시작, 에러 추적 |
| `dart_format` | 코드 포맷팅 | 코드 작성 후, 완료 전 |
| `dart_fix` | 자동 수정 적용 | 경고/힌트 수정 |
| `pub` | 패키지 관리 | 의존성 추가/업데이트 |
| `pub_dev_search` | 패키지 검색 | 새 기능 구현 전 |
| `run_tests` | 테스트 실행 | 코드 변경 후 검증 |
| `create_project` | 프로젝트 생성 | 새 프로젝트 시작 |
| `connect_dart_tooling_daemon` | DTD 연결 | 앱 실행 시 |
| `hot_reload` | 핫 리로드 | 코드 변경 후 즉시 |
| `get_runtime_errors` | 런타임 에러 확인 | 앱 실행 중 디버깅 |
| `get_widget_tree` | 위젯 트리 조회 | Flutter UI 분석 |
| `hover` | 타입/문서 정보 | 코드 이해 필요 시 |
| `signature_help` | 함수 시그니처 | API 사용법 확인 |
| `resolve_workspace_symbol` | 심볼 검색 | 함수/클래스 찾기 |

---

## 🎓 학습: MCP가 더 나은 이유

### **터미널 vs MCP 비교:**

| 작업 | 터미널 방식 | MCP 방식 | 승자 |
|------|-----------|---------|------|
| 테스트 실행 | `flutter test` (출력 제한) | `run_tests` (구조화된 결과) | 🏆 MCP |
| 포맷팅 | `dart format .` (확인 어려움) | `dart_format` (변경 파일 리스트) | 🏆 MCP |
| 에러 확인 | 수동 로그 확인 | `get_errors` (파싱된 데이터) | 🏆 MCP |
| 패키지 검색 | 브라우저 열기 | `pub_dev_search` (즉시 결과) | 🏆 MCP |
| Hot Reload | 수동 R 키 누름 | `hot_reload` (자동화) | 🏆 MCP |

---

**이 가이드를 항상 따르세요!** 🚀

**마지막 업데이트:** 2025-10-16  
**버전:** v1.0
